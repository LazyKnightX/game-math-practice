游戏开发中的数学工具选择
│
├─── 📍 空间与位置 (Space & Position)
│    │
│    ├─── 方向与朝向
│    │    ├─ 问题：物体朝某方向移动
│    │    │  └─ 工具：三角函数分解
│    │    │     └─ 代码：vx = speed * cos(θ), vy = speed * sin(θ)
│    │    │
│    │    ├─ 问题：计算两点间角度
│    │    │  └─ 工具：反正切函数
│    │    │     └─ 代码：θ = atan2(dy, dx)
│    │    │
│    │    ├─ 问题：枪口/角色朝向目标
│    │    │  └─ 工具：atan2 + 角度插值
│    │    │     └─ 代码：angle = lerp(angle, targetAngle, turnSpeed)
│    │    │
│    │    └─ 问题：判断是否面向目标
│    │       └─ 工具：向量点积
│    │          └─ 代码：dot(forward, toTarget) > 0
│    │
│    ├─── 圆周与旋转
│    │    ├─ 问题：物体绕点旋转
│    │    │  └─ 工具：圆的参数方程
│    │    │     └─ 代码：x = cx + r*cos(θ), y = cy + r*sin(θ)
│    │    │
│    │    ├─ 问题：敌人环绕玩家
│    │    │  └─ 工具：参数方程 + 时间演化
│    │    │     └─ 代码：θ(t) = θ₀ + ωt
│    │    │
│    │    ├─ 问题：卫星轨道/行星系统
│    │    │  └─ 工具：椭圆参数方程
│    │    │     └─ 代码：x = a*cos(θ), y = b*sin(θ)
│    │    │
│    │    ├─ 问题：技能范围指示器（扇形）
│    │    │  └─ 工具：角度区间 + 距离判断
│    │    │     └─ 代码：abs(θ-θ₀) < range && dist < radius
│    │    │
│    │    └─ 问题：雷达扫描效果
│    │       └─ 工具：旋转角度 + 渐变
│    │          └─ 代码：scanAngle = (t * speed) % (2π)
│    │
│    ├─── 距离与范围
│    │    ├─ 问题：两点距离
│    │    │  └─ 工具：勾股定理
│    │    │     └─ 代码：dist = sqrt(dx² + dy²)
│    │    │
│    │    ├─ 问题：优化：避免开方
│    │    │  └─ 工具：距离平方比较
│    │    │     └─ 代码：dx² + dy² < r²
│    │    │
│    │    ├─ 问题：圆形碰撞检测
│    │    │  └─ 工具：圆心距 vs 半径和
│    │    │     └─ 代码：dist(c1, c2) < r1 + r2
│    │    │
│    │    ├─ 问题：点是否在扇形内
│    │    │  └─ 工具：距离 + 角度双重判断
│    │    │     └─ 代码：dist < r && abs(angle) < θ/2
│    │    │
│    │    └─ 问题：最近的敌人
│    │       └─ 工具：遍历 + 最小值
│    │          └─ 代码：minDist = min(distances)
│    │
│    └─── 坐标变换
│         ├─ 问题：世界坐标 ↔ 屏幕坐标
│         │  └─ 工具：仿射变换矩阵
│         │     └─ 代码：screen = world * viewMatrix * projMatrix
│         │
│         ├─ 问题：相机跟随
│         │  └─ 工具：坐标偏移
│         │     └─ 代码：viewX = worldX - camera.x
│         │
│         ├─ 问题：等距视角（2.5D）
│         │  └─ 工具：投影变换
│         │     └─ 代码：screenX = worldX - worldY, screenY = (worldX + worldY)/2
│         │
│         └─ 问题：小地图映射
│            └─ 工具：比例缩放
│               └─ 代码：miniX = worldX * scale + offset
│
├─── ⏱️ 时间与动画 (Time & Animation)
│    │
│    ├─── 周期运动
│    │    ├─ 问题：物体上下浮动
│    │    │  └─ 工具：正弦函数
│    │    │     └─ 代码：y = y₀ + A * sin(ωt)
│    │    │
│    │    ├─ 问题：呼吸光效/脉冲
│    │    │  └─ 工具：sin映射到[0,1]
│    │    │     └─ 代码：α = 0.5 + 0.5 * sin(t)
│    │    │
│    │    ├─ 问题：钟摆/摇摆
│    │    │  └─ 工具：余弦函数
│    │    │     └─ 代码：angle = A * cos(ωt)
│    │    │
│    │    ├─ 问题：心跳效果
│    │    │  └─ 工具：复合周期函数
│    │    │     └─ 代码：scale = 1 + 0.1*sin(t*2) + 0.05*sin(t*4)
│    │    │
│    │    └─ 问题：昼夜循环
│    │       └─ 工具：周期映射
│    │          └─ 代码：brightness = 0.5 + 0.5*sin(2π*t/dayLength)
│    │
│    ├─── 波动效果
│    │    ├─ 问题：水面波纹
│    │    │  └─ 工具：多个正弦波叠加
│    │    │     └─ 代码：h = Σ Aᵢ * sin(kᵢx - ωᵢt + φᵢ)
│    │    │
│    │    ├─ 问题：旗帜飘动
│    │    │  └─ 工具：空间+时间的正弦
│    │    │     └─ 代码：offset = sin(x * freq + t * speed)
│    │    │
│    │    ├─ 问题：能量护盾波动
│    │    │  └─ 工具：球面谐波
│    │    │     └─ 代码：r = r₀ + Σ Aᵢ * sin(θ*nᵢ + t)
│    │    │
│    │    └─ 问题：声波可视化
│    │       └─ 工具：傅里叶变换
│    │          └─ 代码：spectrum = FFT(audioData)
│    │
│    ├─── 缓动与插值
│    │    ├─ 问题：平滑移动到目标
│    │    │  └─ 工具：线性插值(Lerp)
│    │    │     └─ 代码：x = x + (target - x) * t
│    │    │
│    │    ├─ 问题：加速启动/减速停止
│    │    │  └─ 工具：缓动函数(Easing)
│    │    │     ├─ EaseIn: t²
│    │    │     ├─ EaseOut: 1-(1-t)²
│    │    │     └─ EaseInOut: smoothstep
│    │    │
│    │    ├─ 问题：弹性效果
│    │    │  └─ 工具：阻尼振动
│    │    │     └─ 代码：x = A * sin(ωt) * e^(-kt)
│    │    │
│    │    ├─ 问题：相机平滑跟随
│    │    │  └─ 工具：指数衰减
│    │    │     └─ 代码：cam += (target - cam) * smoothness
│    │    │
│    │    └─ 问题：角度插值（避免360°跳变）
│    │       └─ 工具：最短路径角度差
│    │          └─ 代码：diff = ((θ₂-θ₁ + π) % 2π) - π
│    │
│    ├─── 震动与抖动
│    │    ├─ 问题：屏幕震动
│    │    │  └─ 工具：随机 + 衰减
│    │    │     └─ 代码：offset = random(-1,1) * amplitude * e^(-kt)
│    │    │
│    │    ├─ 问题：受击反馈
│    │    │  └─ 工具：正弦震动 + 衰减
│    │    │     └─ 代码：shake = A * sin(ωt) * (1-t)
│    │    │
│    │    └─ 问题：手柄震动强度
│    │       └─ 工具：距离衰减
│    │          └─ 代码：intensity = max(0, 1 - dist/maxDist)
│    │
│    └─── 计时与冷却
│         ├─ 问题：技能CD进度条
│         │  └─ 工具：线性归一化
│         │     └─ 代码：progress = t / totalTime
│         │
│         ├─ 问题：圆形CD指示器
│         │  └─ 工具：角度映射
│         │     └─ 代码：angle = (1 - progress) * 2π
│         │
│         └─ 问题：倒计时加速（紧迫感）
│            └─ 工具：非线性时间缩放
│               └─ 代码：speed = 1 + (1 - t)²
│
├─── 🎯 物理与运动 (Physics & Motion)
│    │
│    ├─── 抛物线运动
│    │    ├─ 问题：投掷物轨迹
│    │    │  └─ 工具：运动学方程
│    │    │     ├─ x(t) = x₀ + v₀ₓ * t
│    │    │     └─ y(t) = y₀ + v₀ᵧ * t - ½gt²
│    │    │
│    │    ├─ 问题：计算落点
│    │    │  └─ 工具：求根公式
│    │    │     └─ 代码：t = (v₀ᵧ + sqrt(v₀ᵧ² + 2gh)) / g
│    │    │
│    │    ├─ 问题：最优发射角度
│    │    │  └─ 工具：微积分极值
│    │    │     └─ 代码：θ = 45° (无空气阻力)
│    │    │
│    │    └─ 问题：弓箭轨迹预测线
│    │       └─ 工具：参数方程采样
│    │          └─ 代码：for(t in steps) plot(x(t), y(t))
│    │
│    ├─── 速度与加速度
│    │    ├─ 问题：匀加速运动
│    │    │  └─ 工具：积分关系
│    │    │     ├─ v = v₀ + at
│    │    │     └─ s = v₀t + ½at²
│    │    │
│    │    ├─ 问题：摩擦力减速
│    │    │  └─ 工具：阻尼系数
│    │    │     └─ 代码：v *= (1 - friction)
│    │    │
│    │    ├─ 问题：追踪导弹
│    │    │  └─ 工具：向量加速度
│    │    │     └─ 代码：a = normalize(target - pos) * accel
│    │    │
│    │    └─ 问题：漂移/惯性
│    │       └─ 工具：速度累加
│    │          └─ 代码：pos += velocity; velocity += accel
│    │
│    ├─── 碰撞检测
│    │    ├─ 问题：圆形碰撞
│    │    │  └─ 工具：距离比较
│    │    │     └─ 代码：dist² < (r1+r2)²
│    │    │
│    │    ├─ 问题：矩形碰撞(AABB)
│    │    │  └─ 工具：区间重叠
│    │    │     └─ 代码：x1<x2+w2 && x1+w1>x2 && ...
│    │    │
│    │    ├─ 问题：射线检测
│    │    │  └─ 工具：参数方程 + 求交
│    │    │     └─ 代码：P = origin + t * direction
│    │    │
│    │    ├─ 问题：碰撞响应
│    │    │  └─ 工具：向量反射
│    │    │     └─ 代码：v' = v - 2(v·n)n
│    │    │
│    │    └─ 问题：穿透深度
│    │       └─ 工具：距离 - 半径
│    │          └─ 代码：overlap = (r1+r2) - dist
│    │
│    ├─── 力与冲量
│    │    ├─ 问题：击退效果
│    │    │  └─ 工具：冲量定理
│    │    │     └─ 代码：v += normalize(dir) * knockback
│    │    │
│    │    ├─ 问题：爆炸冲击波
│    │    │  └─ 工具：径向力 + 距离衰减
│    │    │     └─ 代码：F = k * (1 - dist/r) * direction
│    │    │
│    │    ├─ 问题：重力场
│    │    │  └─ 工具：万有引力
│    │    │     └─ 代码：F = G*m1*m2 / r²
│    │    │
│    │    └─ 问题：弹簧连接
│    │       └─ 工具：胡克定律
│    │          └─ 代码：F = -k * (length - restLength)
│    │
│    └─── 旋转动力学
│         ├─ 问题：角速度
│         │  └─ 工具：角度变化率
│         │     └─ 代码：ω = Δθ / Δt
│         │
│         ├─ 问题：转向限制
│         │  └─ 工具：角加速度限制
│         │     └─ 代码：ω = clamp(ω + α*dt, -max, max)
│         │
│         └─ 问题：陀螺仪效果
│            └─ 工具：角动量守恒
│               └─ 代码：L = I * ω = const
│
├─── 🤖 AI与寻路 (AI & Pathfinding)
│    │
│    ├─── 追逐与逃离
│    │    ├─ 问题：直线追踪
│    │    │  └─ 工具：向量归一化
│    │    │     └─ 代码：dir = normalize(target - pos)
│    │    │
│    │    ├─ 问题：预测性追踪
│    │    │  └─ 工具：线性外推
│    │    │     └─ 代码：predict = target.pos + target.vel * t
│    │    │
│    │    ├─ 问题：逃离危险
│    │    │  └─ 工具：反向向量
│    │    │     └─ 代码：dir = normalize(pos - danger)
│    │    │
│    │    └─ 问题：包围目标
│    │       └─ 工具：圆周分布 + 追踪
│    │          └─ 代码：targetPos = player + offset(angle)
│    │
│    ├─── 视野与感知
│    │    ├─ 问题：视锥检测
│    │    │  └─ 工具：点积 + 距离
│    │    │     └─ 代码：dot(forward, toTarget) > cos(fov/2)
│    │    │
│    │    ├─ 问题：视线遮挡
│    │    │  └─ 工具：射线投射
│    │    │     └─ 代码：raycast(eye, target) == null
│    │    │
│    │    ├─ 问题：听觉范围
│    │    │  └─ 工具：距离衰减
│    │    │     └─ 代码：volume = max(0, 1 - dist/hearRange)
│    │    │
│    │    └─ 问题：360°雷达
│    │       └─ 工具：极坐标映射
│    │          └─ 代码：radarAngle = atan2(dy, dx) - playerAngle
│    │
│    ├─── 群体行为
│    │    ├─ 问题：分离(Separation)
│    │    │  └─ 工具：排斥力求和
│    │    │     └─ 代码：force += Σ(pos - neighbor) / dist²
│    │    │
│    │    ├─ 问题：聚合(Cohesion)
│    │    │  └─ 工具：质心计算
│    │    │     └─ 代码：center = Σ(neighbor.pos) / count
│    │    │
│    │    ├─ 问题：对齐(Alignment)
│    │    │  └─ 工具：平均速度
│    │    │     └─ 代码：avgVel = Σ(neighbor.vel) / count
│    │    │
│    │    └─ 问题：鸟群/鱼群
│    │       └─ 工具：Boids算法(上述三者结合)
│    │          └─ 代码：vel = separate + cohesion + align
│    │
│    ├─── 巡逻与路径
│    │    ├─ 问题：路径点巡逻
│    │    │  └─ 工具：线性插值
│    │    │     └─ 代码：pos = lerp(waypoints[i], waypoints[i+1], t)
│    │    │
│    │    ├─ 问题：平滑路径
│    │    │  └─ 工具：贝塞尔曲线
│    │    │     └─ 代码：P(t) = (1-t)³P₀ + 3(1-t)²tP₁ + ...
│    │    │
│    │    ├─ 问题：正弦波巡逻
│    │    │  └─ 工具：参数方程
│    │    │     └─ 代码：y = centerY + A*sin(x * freq)
│    │    │
│    │    └─ 问题：螺旋路径
│    │       └─ 工具：极坐标 + 半径变化
│    │          └─ 代码：r = r₀ + k*θ
│    │
│    └─── 决策与状态
│         ├─ 问题：攻击距离判断
│         │  └─ 工具：距离阈值
│         │     └─ 代码：if(dist < attackRange) attack()
│         │
│         ├─ 问题：威胁评估
│         │  └─ 工具：加权求和
│         │     └─ 代码：threat = Σ(enemy.damage / dist)
│         │
│         └─ 问题：概率行为
│            └─ 工具：随机数 + 权重
│               └─ 代码：if(random() < probability) doAction()
│
├─── 🎨 视觉效果 (Visual Effects)
│    │
│    ├─── 粒子系统
│    │    ├─ 问题：爆炸粒子
│    │    │  └─ 工具：极坐标均匀分布
│    │    │     └─ 代码：angle = i * 2π / count
│    │    │
│    │    ├─ 问题：火焰粒子
│    │    │  └─ 工具：随机 + 上升 + 摇摆
│    │    │     └─ 代码：x += sin(life*freq)*wobble; y -= speed
│    │    │
│    │    ├─ 问题：烟雾扩散
│    │    │  └─ 工具：随机游走 + 缩放
│    │    │     └─ 代码：pos += random(); scale *= growth
│    │    │
│    │    ├─ 问题：粒子寿命
│    │    │  └─ 工具：线性衰减
│    │    │     └─ 代码：alpha = 1 - (age / maxAge)
│    │    │
│    │    └─ 问题：重力影响
│    │       └─ 工具：加速度积分
│    │          └─ 代码：vy += gravity; y += vy
│    │
│    ├─── 轨迹与拖尾
│    │    ├─ 问题：运动模糊
│    │    │  └─ 工具：历史位置插值
│    │    │     └─ 代码：for(pos in history) draw(pos, alpha)
│    │    │
│    │    ├─ 问题：剑光拖尾
│    │    │  └─ 工具：贝塞尔曲线 + 渐变
│    │    │     └─ 代码：curve(prevPos, currPos, nextPos)
│    │    │
│    │    └─ 问题：子弹弹道
│    │       └─ 工具：线段绘制 + 衰减
│    │          └─ 代码：line(oldPos, newPos, alpha)
│    │
│    ├─── 光照与阴影
│    │    ├─ 问题：点光源衰减
│    │    │  └─ 工具：平方反比
│    │    │     └─ 代码：intensity = k / (dist² + 1)
│    │    │
│    │    ├─ 问题：聚光灯
│    │    │  └─ 工具：角度衰减 + 距离衰减
│    │    │     └─ 代码：I = I₀ * cos(θ)ⁿ * (1-d/r)
│    │    │
│    │    ├─ 问题：昼夜光照
│    │    │  └─ 工具：周期函数
│    │    │     └─ 代码：ambient = 0.3 + 0.7*sin(time)
│    │    │
│    │    └─ 问题：简单阴影
│    │       └─ 工具：投影变换
│    │          └─ 代码：shadowPos = pos * (1, 0.5) + offset
│    │
│    ├─── 扭曲与变形
│    │    ├─ 问题：热浪扭曲
│    │    │  └─ 工具：正弦位移
│    │    │     └─ 代码：uv.x += sin(uv.y*freq + time) * amount
│    │    │
│    │    ├─ 问题：水面折射
│    │    │  └─ 工具：法线扰动
│    │    │     └─ 代码：normal += noise(pos + time)
│    │    │
│    │    └─ 问题：传送门效果
│    │       └─ 工具：极坐标扭曲
│    │          └─ 代码：r = r * (1 + sin(θ*n + t))
│    │
│    └─── 过渡与转场
│         ├─ 问题：淡入淡出
│         │  └─ 工具：线性插值
│         │     └─ 代码：alpha = t / duration
│         │
│         ├─ 问题：圆形扩散转场
│         │  └─ 工具：距离场
│         │     └─ 代码：visible = dist(pixel, center) < radius(t)
│         │
│         ├─ 问题：像素化转场
│         │  └─ 工具：分辨率降低
│         │     └─ 代码：pixelSize = lerp(1, maxSize, t)
│         │
│         └─ 问题：波纹转场
│            └─ 工具：正弦波传播
│               └─ 代码：offset = sin(dist - time*speed)
│
├─── 🎵 音频与节奏 (Audio & Rhythm)
│    │
│    ├─── 音量与衰减
│    │    ├─ 问题：3D音效定位
│    │    │  └─ 工具：距离衰减
│    │    │     └─ 代码：volume = 1 / (1 + dist/refDist)
│    │    │
│    │    ├─ 问题：立体声平衡
│    │    │  └─ 工具：角度映射
│    │    │     └─ 代码：pan = sin(angle) (左-1, 右+1)
│    │    │
│    │    └─ 问题：多普勒效应
│    │       └─ 工具：相对速度
│    │          └─ 代码：pitch = f₀ * (c + vₗ) / (c + vₛ)
│    │
│    ├─── 节奏检测
│    │    ├─ 问题：BPM同步
│    │    │  └─ 工具：周期计算
│    │    │     └─ 代码：beatTime = 60 / BPM
│    │    │
│    │    ├─ 问题：节拍对齐
│    │    │  └─ 工具：取模运算
│    │    │     └─ 代码：onBeat = (time % beatTime) < threshold
│    │    │
│    │    └─ 问题：音频可视化
│    │       └─ 工具：频谱分析(FFT)
│    │          └─ 代码：bars[i].height = spectrum[i]
│    │
│    └─── 音效合成
│         ├─ 问题：激光音效
│         │  └─ 工具：频率下降
│         │     └─ 代码：freq = startFreq * e^(-kt)
│         │
│         ├─ 问题：爆炸音效
│         │  └─ 工具：白噪声 + 包络
│         │     └─ 代码：sample = noise() * envelope(t)
│         │
│         └─ 问题：脚步声节奏
│            └─ 工具：速度映射
│               └─ 代码：stepInterval = baseInterval / speed
│
├─── 🎲 随机与程序生成 (Random & Procedural)
│    │
│    ├─── 噪声函数
│    │    ├─ 问题：地形生成
│    │    │  └─ 工具：Perlin噪声
│    │    │     └─ 代码：height = noise(x, y) * amplitude
│    │    │
│    │    ├─ 问题：云朵生成
│    │    │  └─ 工具：多层噪声叠加
│    │    │     └─ 代码：value = Σ noise(x*2ⁱ) / 2ⁱ
│    │    │
│    │    ├─ 问题：洞穴生成
│    │    │  └─ 工具：噪声阈值
│    │    │     └─ 代码：isSolid = noise(x,y) > threshold
│    │    │
│    │    └─ 问题：火焰纹理
│    │       └─ 工具：噪声 + 梯度
│    │          └─ 代码：color = gradient(noise(x, y-t))
│    │
│    ├─── 分布与采样
│    │    ├─ 问题：随机生成敌人
│    │    │  └─ 工具：泊松分布
│    │    │     └─ 代码：spawnRate = λ * e^(-λt)
│    │    │
│    │    ├─ 问题：战利品掉落
│    │    │  └─ 工具：加权随机
│    │    │     └─ 代码：item = weightedRandom(lootTable)
│    │    │
│    │    ├─ 问题：圆内随机点
│    │    │  └─ 工具：极坐标 + sqrt
│    │    │     └─ 代码：r = sqrt(random()) * R
│    │    │
│    │    └─ 问题：均匀分布在球面
│    │       └─ 工具：球坐标
│    │          └─ 代码：θ = acos(2*rand()-1)
│    │
│    ├─── 程序化内容
│    │    ├─ 问题：迷宫生成
│    │    │  └─ 工具：递归回溯
│    │    │     └─ 代码：DFS + 随机方向
│    │    │
│    │    ├─ 问题：房间布局
│    │    │  └─ 工具：BSP树分割
│    │    │     └─ 代码：recursiveSplit(space)
│    │    │
│    │    └─ 问题：武器属性
│    │       └─ 工具：正态分布
│    │          └─ 代码：damage = μ + σ * gaussianRandom()
│    │
│    └─── 抖动与变化
│         ├─ 问题：镜头抖动
│         │  └─ 工具：随机 + 衰减
│         │     └─ 代码：offset = random(-1,1) * shake * decay
│         │
│         ├─ 问题：伤害浮动
│         │  └─ 工具：范围随机
│         │     └─ 代码：dmg = base * (0.9 + random()*0.2)
│         │
│         └─ 问题：NPC对话变化
│            └─ 工具：马尔可夫链
│               └─ 代码：nextWord = chain[currentWord].random()
│
├─── 🎯 瞄准与射击 (Aiming & Shooting)
│    │
│    ├─── 弹道计算
│    │    ├─ 问题：直线射击
│    │    │  └─ 工具：向量归一化
│    │    │     └─ 代码：dir = normalize(target - gun)
│    │    │
│    │    ├─ 问题：预判射击
│    │    │  └─ 工具：线性外推
│    │    │     └─ 代码：aim = target + velocity * travelTime
│    │    │
│    │    ├─ 问题：抛物线射击
│    │    │  └─ 工具：求解发射角
│    │    │     └─ 代码：θ = atan((v²±√(v⁴-g(gx²+2yv²)))/(gx))
│    │    │
│    │    └─ 问题：子弹下坠
│    │       └─ 工具：重力积分
│    │          └─ 代码：vy += gravity * dt
│    │
│    ├─── 散射与后坐力
│    │    ├─ 问题：霰弹枪扩散
│    │    │  └─ 工具：圆锥随机
│    │    │     └─ 代码：angle = base + random(-spread, spread)
│    │    │
│    │    ├─ 问题：后坐力模式
│    │    │  └─ 工具：预定义曲线
│    │    │     └─ 代码：recoil[shotNum] = pattern[shotNum]
│    │    │
│    │    └─ 问题：精度恢复
│    │       └─ 工具：指数衰减
│    │          └─ 代码：spread *= (1 - recovery)
│    │
│    ├─── 自动瞄准
│    │    ├─ 问题：吸附辅助
│    │    │  └─ 工具：角度插值
│    │    │     └─ 代码：aim = lerp(aim, target, assist)
│    │    │
│    │    ├─ 问题：锁定最近敌人
│    │    │  └─ 工具：距离排序
│    │    │     └─ 代码：target = min(enemies, by: dist)
│    │    │
│    │    └─ 问题：视野内筛选
│    │       └─ 工具：点积过滤
│    │          └─ 代码：filter(e => dot(aim, toE) > cos(fov))
│    │
│    └─── 弹道特效
│         ├─ 问题：曳光弹
│         │  └─ 工具：线段 + 渐变
│         │     └─ 代码：drawLine(start, end, gradient)
│         │
│         ├─ 问题：激光瞄准线
│         │  └─ 工具：射线投射
│         │     └─ 代码：hitPoint = raycast(gun, direction)
│         │
│         └─ 问题：弹道预测线
│            └─ 工具：轨迹采样
│               └─ 代码：for(t) points.add(trajectory(t))
│
├─── 📐 UI与HUD (UI & HUD)
│    │
│    ├─── 血条与进度
│    │    ├─ 问题：血条填充
│    │    │  └─ 工具：比例映射
│    │    │     └─ 代码：width = maxWidth * (hp / maxHp)
│    │    │
│    │    ├─ 问题：平滑过渡
│    │    │  └─ 工具：延迟跟随
│    │    │     └─ 代码：displayHp += (hp - displayHp) * speed
│    │    │
│    │    ├─ 问题：圆形血条
│    │    │  └─ 工具：弧度映射
│    │    │     └─ 代码：arc(0, 2π * hp/maxHp)
│    │    │
│    │    └─ 问题：分段血条
│    │       └─ 工具：取整 + 余数
│    │          └─ 代码：full = floor(hp/segment); partial = hp%segment
│    │
│    ├─── 雷达与小地图
│    │    ├─ 问题：世界到雷达
│    │    │  └─ 工具：坐标缩放 + 旋转
│    │    │     └─ 代码：radar = rotate(world * scale, -playerAngle)
│    │    │
│    │    ├─ 问题：边缘指示器
│    │    │  └─ 工具：屏幕边界裁剪
│    │    │     └─ 代码：pos = clampToScreen(worldToScreen(target))
│    │    │
│    │    └─ 问题：距离淡化
│    │       └─ 工具：距离映射透明度
│    │          └─ 代码：alpha = 1 - (dist / maxDist)
│    │
│    ├─── 准星与瞄准
│    │    ├─ 问题：动态准星
│    │    │  └─ 工具：速度映射大小
│    │    │     └─ 代码：size = baseSize + speed * factor
│    │    │
│    │    ├─ 问题：命中指示器
│    │    │  └─ 工具：角度分布
│    │    │     └─ 代码：angle = atan2(hit.y - center.y, ...)
│    │    │
│    │    └─ 问题：伤害方向指示
│    │       └─ 工具：向量到角度
│    │          └─ 代码：dir = atan2(attacker - player)
│    │
│    └─── 动画与反馈
│         ├─ 问题：数字跳动
│         │  └─ 工具：缓动函数
│         │     └─ 代码：display = easeOut(current, target, t)
│         │
│         ├─ 问题：图标闪烁
│         │  └─ 工具：正弦波
│         │     └─ 代码：alpha = 0.5 + 0.5*sin(time*freq)
│         │
│         └─ 问题：技能冷却扫光
│            └─ 工具：角度遮罩
│               └─ 代码：drawArc(0, 2π * progress)
│
└─── 🧮 优化与性能 (Optimization)
     │
     ├─── 空间分割
     │    ├─ 问题：碰撞检测优化
     │    │  └─ 工具：网格分割
     │    │     └─ 代码：cell = floor(pos / cellSize)
     │    │
     │    ├─ 问题：视野剔除
     │    │  └─ 工具：AABB测试
     │    │     └─ 代码：inView = rect.intersects(camera)
     │    │
     │    └─ 问题：LOD层级
     │       └─ 工具：距离分级
     │          └─ 代码：lod = floor(log2(dist / minDist))
     │
     ├─── 数学优化
     │    ├─ 问题：避免开方
     │    │  └─ 工具：距离平方比较
     │    │     └─ 代码：dx²+dy² < r² (代替 sqrt)
     │    │
     │    ├─ 问题：三角函数查找表
     │    │  └─ 工具：预计算数组
     │    │     └─ 代码：sinTable[angle*precision]
     │    │
     │    ├─ 问题：快速反平方根
     │    │  └─ 工具：位运算近似
     │    │     └─ 代码：Q_rsqrt(x) // Quake III算法
     │    │
     │    └─ 问题：整数运算
     │       └─ 工具：定点数
     │          └─ 代码：fixedPoint = int * 1000
     │
     ├─── 批处理
     │    ├─ 问题：粒子系统
     │    │  └─ 工具：对象池
     │    │     └─ 代码：particle = pool.get()
     │    │
     │    ├─ 问题：绘制调用
     │    │  └─ 工具：实例化渲染
     │    │     └─ 代码：drawInstanced(mesh, transforms)
     │    │
     │    └─ 问题：物理更新
     │       └─ 工具：空间哈希
     │          └─ 代码：hash = (x>>shift) ^ (y>>shift)
     │
     └─── 近似算法
          ├─ 问题：快速sin/cos
          │  └─ 工具：泰勒级数
          │     └─ 代码：sin(x) ≈ x - x³/6 + x⁵/120
          │
          ├─ 问题：快速atan2
          │  └─ 工具：多项式近似
          │     └─ 代码：atan2 ≈ π/4*y/x (小角度)
          │
          └─ 问题：快速归一化
             └─ 工具：近似倒数
                └─ 代码：invLen ≈ 1.5/sqrt(x²+y²)


═══════════════════════════════════════════════════════════════

🎯 快速决策流程图

问题类型识别 → 工具选择 → 代码实现

1. 包含"方向"、"朝向"、"角度"
   → atan2, cos/sin

2. 包含"围绕"、"旋转"、"环绕"
   → 圆的参数方程

3. 包含"浮动"、"摇摆"、"呼吸"
   → sin(time)

4. 包含"追踪"、"跟随"、"靠近"
   → 向量归一化 + 速度

5. 包含"范围"、"距离"、"半径"
   → 勾股定理 / 距离平方

6. 包含"平滑"、"过渡"、"渐变"
   → lerp / easing函数

7. 包含"抛物线"、"弧线"、"投掷"
   → 运动学方程

8. 包含"随机"、"生成"、"程序化"
   → 噪声函数 / 随机分布

9. 包含"碰撞"、"相交"、"重叠"
   → 几何判断算法

10. 包含"衰减"、"淡出"、"减弱"
    → 指数函数 / 距离平方反比

═══════════════════════════════════════════════════════════════
